FROM python:3.8.5-slim-buster

WORKDIR /app

COPY frontend/requirements.txt requirements.txt
RUN pip install --no-cache-dir -r requirements.txt

EXPOSE 8050

COPY ./frontend /app/frontend

RUN useradd -m frontend
USER frontend

ENTRYPOINT ["/usr/local/bin/gunicorn", "--worker-class", "gevent", "--preload", "--config", "frontend/config/gunicorn.py", "--log-config", "frontend/config/logging.conf", "--bind", ":8050", "frontend.frontend_app:server"]